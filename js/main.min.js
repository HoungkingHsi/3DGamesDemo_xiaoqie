var e,f,h,k,l,m=[],n=0,p,q,r=!1;document.d("DOMContentLoaded",function(){if(BABYLON.r.ca()){var a=window.ba||document.y.u||document.n.u,b=window.aa||document.y.t||document.n.t;q=a;document.i("renderCanvas").C("width",a);document.i("renderCanvas").C("height",b);document.i("debug").$+="\u5bbd\uff1a"+a+"px\x3cbr\x3e\u9ad8\uff1a"+b+"px";t();u();p=new Stats;p.ma(n);p.z.d("click",v);document.n.P(p.z)}},!1);function w(){p.S();p.Y();requestAnimationFrame(w)}function v(){n+=1;2<n&&(n=0)}function t(){k=document.i("renderCanvas");h=new BABYLON.r(k,!0);e=new BABYLON.M(h);f=new BABYLON.I("camera1",new BABYLON.e(0,4,-10),e);f.ka(new BABYLON.e(0,0,10));f.Q(k);new BABYLON.K("light1",new BABYLON.e(0,5,-5),e);h.ha(function(){e.fa();x();y.forEach(function(a){a.f||(a.a.c-=.5)})})}var z=3,A=5,B=[],y=[];function u(){for(var a=z/2*A*-1,b=0;b<z;b++){B[b]=a;C(b,a);var c=D(b,a);m.push(c);a+=A}f.a.b=B[Math.floor(z/2)];E();requestAnimationFrame(w);BABYLON.N.J("red_toad","assets/","toad.babylon",e,function(a){console.log(a);a=a[0];a.A=!1;a.g=new BABYLON.e(.5,.5,.5);l=a});window.ia(F,1E3);window.d("keydown",G);window.d("touchstart",H);window.d("resize",I);window.d("click",J)}function J(a){a.ea();if(!r){r=!0;var b=window.la(function(){clearTimeout(b);r=!1},300);a=K(a);var c=-1;a.b/q<1/3&&(c=0);a.b/q<2/3&&a.b/q>1/3&&(c=1);a.b/q>2/3&&(c=2);-1!=c&&(L(m[c]),a=M(m[c]))&&(a.f=!0)}}function K(a){var b=a.v||b,c=a.U||c;return{b:b,h:c}}function I(){h.ga()}function H(a){console.log(a.oa[0].v)}function M(a){for(var b=0;b<y.length;b++){var c=y[b];if(c.a.b===a.a.b){var g=a.a.c+3;if(c.a.c>a.a.c-3&&c.a.c<g)return c}}return null}function G(a){var b=-1;switch(a.da){case 65:b=0;break;case 83:b=1;break;case 68:b=2}-1!=b&&(L(m[b]),a=M(m[b]))&&(a.f=!0)}function L(a){var b=a.a.h,c=new BABYLON.j("animateEnding","position.y",60,BABYLON.j.F,BABYLON.j.D),g=[];g.push({o:0,value:b},{o:5,value:b+.5},{o:10,value:b});c.ja(g);a.O.push(c);e.T(a,0,10,!1,1)}function x(){for(var a=0;a<y.length;a++)if(y[a].f){var b=y[a];b.x();y.splice(a,1);a--}else-10>y[a].a.c&&(b=y[a],b.x(),y.splice(a,1),a--)}function E(){var a=BABYLON.l.q("skyBox",100,e),b=new BABYLON.m("skyBox",e);b.R=!1;b.w=new BABYLON.k(0,0,0);b.na=new BABYLON.k(0,0,0);b.B=new BABYLON.H("assets/cubemap/cubemap",e);b.B.W=BABYLON.s.L;a.p=b}function F(){var a=B[Math.floor(Math.random()*z)],b=l.V(l.name);b.Z=l.name+(y.length+1);b.f=!1;b.A=!0;b.a=new BABYLON.e(a,b.a.h/2,100);y.push(b)}function C(a,b){a=BABYLON.l.q("lane"+a,1,e);var c=new BABYLON.m("ground1",e),g=new BABYLON.s("assets/ground.jpg",e);g.pa=40;g.qa=2;c.X=g;a.p=c;a.g.h=.1;a.g.b=3;a.g.c=800;a.a.b=b;a.a.c=a.g.c/2-200}function D(a,b){a=BABYLON.l.G(a,3,4,1,e);a.a.b=b;a.a.h=.1;a.a.c=1;b=new BABYLON.m("endingmat",e);b.w=new BABYLON.k(.8,.2,.2);a.p=b;return a};