var e,f,h,k,l,m=[],n=0,p,q,r=!1;document.d("DOMContentLoaded",function(){if(BABYLON.r.ca()){var a=window.ba||document.y.u||document.n.u,b=window.aa||document.y.t||document.n.t;q=a;document.i("renderCanvas").C("width",a);document.i("renderCanvas").C("height",b);document.i("debug").$+="\u5bbd\uff1a"+a+"px\x3cbr\x3e\u9ad8\uff1a"+b+"px";t();u();p=new Stats;p.ma(n);p.z.d("click",v);document.n.P(p.z)}},!1);function x(){p.S();p.Y();requestAnimationFrame(x)}function v(){n+=1;2<n&&(n=0)}function t(){k=document.i("renderCanvas");h=new BABYLON.r(k,!0);e=new BABYLON.M(h);f=new BABYLON.I("camera1",new BABYLON.e(0,4,-10),e);f.ka(new BABYLON.e(0,0,10));f.Q(k);new BABYLON.K("light1",new BABYLON.e(0,5,-5),e);h.ha(function(){e.fa();y();z.forEach(function(a){a.f||(a.a.c-=.5)})})}var A=3,B=5,C=[],z=[];function u(){for(var a=A/2*B*-1,b=0;b<A;b++){C[b]=a;D(b,a);var c=E(b,a);m.push(c);a+=B}f.a.b=C[Math.floor(A/2)];F();requestAnimationFrame(x);BABYLON.N.J("","assets/xxf/","xl.babylon",e,function(a){console.log(a);a=a[0];a.A=!1;a.g=new BABYLON.e(.2,.2,.2);l=a});window.ia(G,1E3);window.d("keydown",H);window.d("touchstart",I);window.d("resize",J);window.d("click",K)}function K(a){a.ea();if(!r){r=!0;var b=window.la(function(){clearTimeout(b);r=!1},300);a=L(a);var c=-1;a.b/q<1/3&&(c=0);a.b/q<2/3&&a.b/q>1/3&&(c=1);a.b/q>2/3&&(c=2);-1!=c&&(M(m[c]),a=N(m[c]))&&(a.f=!0)}}function L(a){var b=a.v||b,c=a.U||c;return{b:b,h:c}}function J(){h.ga()}function I(a){console.log(a.oa[0].v)}function N(a){for(var b=0;b<z.length;b++){var c=z[b];if(c.a.b===a.a.b){var g=a.a.c+3;if(c.a.c>a.a.c-3&&c.a.c<g)return c}}return null}function H(a){var b=-1;switch(a.da){case 65:b=0;break;case 83:b=1;break;case 68:b=2}-1!=b&&(M(m[b]),a=N(m[b]))&&(a.f=!0)}function M(a){var b=a.a.h,c=new BABYLON.j("animateEnding","position.y",60,BABYLON.j.F,BABYLON.j.D),g=[];g.push({o:0,value:b},{o:5,value:b+.5},{o:10,value:b});c.ja(g);a.O.push(c);e.T(a,0,10,!1,1)}function y(){for(var a=0;a<z.length;a++)if(z[a].f){var b=z[a];b.x();z.splice(a,1);a--}else-10>z[a].a.c&&(b=z[a],b.x(),z.splice(a,1),a--)}function F(){var a=BABYLON.l.q("skyBox",100,e),b=new BABYLON.m("skyBox",e);b.R=!1;b.w=new BABYLON.k(0,0,0);b.na=new BABYLON.k(0,0,0);b.B=new BABYLON.H("assets/cubemap/cubemap",e);b.B.W=BABYLON.s.L;a.p=b}function G(){var a=C[Math.floor(Math.random()*A)],b=l.V(l.name);b.Z=l.name+(z.length+1);b.f=!1;b.A=!0;b.a=new BABYLON.e(a,b.a.h/2,100);z.push(b)}function D(a,b){var c=BABYLON.l.q("lane"+a,1,e),g=new BABYLON.m("ground1",e),w=new BABYLON.s("assets/ground.jpg",e);w.pa=40;w.qa=2;g.X=w;c.p=g;c.g.h=.1;c.g.b=3;c.g.c=800;c.a.b=b;c.a.c=c.g.c/2-200}function E(a,b){var c=BABYLON.l.G(a,3,4,1,e);c.a.b=b;c.a.h=.1;c.a.c=1;var g=new BABYLON.m("endingmat",e);g.w=new BABYLON.k(.8,.2,.2);c.p=g;return c};